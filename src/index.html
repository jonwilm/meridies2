<!DOCTYPE html>
<html lang="en">
<head>
  @@include("partials/head.html", {"title": "OneUp"})
  
</head>
<body class="nav-transp">
  @@include("partials/navbar.html", {"index": "active"})
  <link href="assets/libs/lightbox2/css/lightbox.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="assets/libs/slick-slider/slick/slick.css">
  <link rel="stylesheet" href="assets/libs/slick-slider/slick/slick-theme.css">
  <link rel="stylesheet" href="assets/css/home.min.css">
  
  <main>
    @@include("partials/home/welcome.html")
    @@include("partials/home/section-empresas.html")
    @@include("partials/home/section-descrip.html")
    @@include("partials/home/section-cards.html")
    @@include("partials/home/section-productos.html")
    @@include("partials/home/section-premios.html")
    @@include("partials/home/section-descrip2.html")
    @@include("partials/home/section-noticias.html")
    
    @@include("partials/newsletter.html")
    @@include("partials/footer.html")
  </main>
  
  @@include("partials/scripts.html")
  <script src="assets/libs/slick-slider/slick/slick.min.js"></script>
  <script src="assets/libs/lightbox2/js/lightbox.min.js"></script>
  <script>
    $('.items-productos').slick({
      infinite: true,
      slidesToShow: 4,
      slidesToScroll: 1,
      prevArrow: '<button type = "button" class = "slick-prev"><img src="assets/images/home/flecha-izq.png"/></button>',
      nextArrow: '<button type = "button" class = "slick-next"><img src="assets/images/home/flecha-der.png"/></button>',
      responsive: [
      {
        breakpoint: 1024,
        settings: {
          slidesToShow: 3,
          slidesToScroll: 1,
          infinite: true,
        }
      },
      {
        breakpoint: 768,
        settings: {
          slidesToShow: 2,
          slidesToScroll: 1
        }
      }
      ]
    })
    
    $(document).ready(function () {
      var show_per_page = 3 // Cambiar para numero de productos por pagina
      $('.pagingBox').each(function(index) {
        var number_of_items = $(this).children().length
        var number_of_pages = Math.ceil(number_of_items/show_per_page)
        $(this).siblings('.current_page').val(0)
        $(this).siblings('.show_per_page').val(show_per_page)
        $(this).siblings('.number_of_items').val(number_of_items)
        $(this).siblings('.number_of_pages').val(number_of_pages)
        var navigation_html = `
          <p class="results"><span class="itemMin">1</span> - <span class="itemMax">` + show_per_page + `</span> de ` + number_of_items + ` resultados</p>
        `
        if (number_of_pages > 1) {
          navigation_html += `
            <div class="pagination">
              <button class="btn prev_link" onclick="pagePrev(this)"><i class="fas fa-angle-double-left fa-lg"></i></button>
              <span class="text-pagination">
                <span>PÃ¡gina</span> <span class="page_current">1</span> <span>de</span> <span>` + number_of_pages + `</span> 
              </span>
              <button class="btn next_link" onclick="pageNext(this)"><i class="fas fa-angle-double-right fa-lg"></i></button>
            </div>        
          `
        }
        $(this).siblings('.content-pagination').html(navigation_html)
        $(this).children().css('display', 'none')
        $(this).children().slice(0, show_per_page).css('display', 'block')
      })
    })
    
    function pagePrev(elem) {
      pageNum = parseInt($(elem).parents('.content-pagination').siblings('.current_page').val()) - 1
      if ($(elem).parents('.content-pagination').siblings('.current_page').val() > 0) {
        go_to_page(pageNum, elem)
      }
    }
    function pageNext(elem) {
      max = parseInt($(elem).parents('.content-pagination').siblings('.number_of_pages').val() - 1)
      pageNum = parseInt($(elem).parents('.content-pagination').siblings('.current_page').val()) + 1
      if ($(elem).parents('.content-pagination').siblings('.current_page').val() < max) {
        go_to_page(pageNum, elem)
      }
    }
    function go_to_page(pageNum, elem) {
      var show_per_page = parseInt($(elem).parents('.content-pagination').siblings('.show_per_page').val())
      var number_of_items = parseInt($(elem).parents('.content-pagination').siblings('.number_of_items').val())
      start_from = pageNum * show_per_page
      end_on = start_from + show_per_page
      if (end_on > number_of_items) {
        maxItems = number_of_items
      } else {
        maxItems = end_on
      }
      $(elem).parents('.content-pagination').siblings('.pagingBox').children().css('display', 'none').slice(start_from, end_on).css('display', 'block')
      $(elem).parents('.content-pagination').siblings('.current_page').val(pageNum)
      $(elem).siblings('.text-pagination').find('.page_current').html(pageNum + 1)
      $(elem).parent('.pagination').siblings('.results').find('.itemMin').html(start_from + 1)
      $(elem).parent('.pagination').siblings('.results').find('.itemMax').html(maxItems)
    }
  </script>
</body>
</html>